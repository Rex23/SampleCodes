#define macros
PATH = C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\bin\intel64;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\redist\intel64\compiler;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\redist\intel64_win\compiler;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.11.25503\bin\HostX64\x64;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\VC\VCPackages;C:\Program Files (x86)\Microsoft SDKs\TypeScript\2.3;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\CommonExtensions\Microsoft\TestWindow;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\CommonExtensions\Microsoft\TeamFoundation\Team Explorer;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\MSBuild\15.0\bin\Roslyn;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Team Tools\Performance Tools;C:\Program Files (x86)\Microsoft Visual Studio\Shared\Common\VSPerfCollectionTools\;C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.6.1 Tools\x64\;C:\Program Files (x86)\Microsoft SDKs\F#\4.1\Framework\v4.0\;C:\Program Files (x86)\Windows Kits\10\bin\x64;C:\Program Files (x86)\Windows Kits\10\bin\10.0.16299.0\x64;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\\MSBuild\15.0\bin;C:\Windows\Microsoft.NET\Framework64\v4.0.30319;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\IDE\;C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\Common7\Tools\;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\mpi\intel64\bin\..\..\intel64\bin;C:\Program Files (x86)\IntelSWTools\debugger_2018\bin\\..\gdb\intel64\bin;C:\Program Files (x86)\IntelSWTools\debugger_2018\bin\..\libipt\intel64\lib;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\ipp\..\redist\intel64\ipp;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\redist\intel64_win\mkl;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\redist\intel64_win\compiler;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\tbb\bin\..\..\redist\intel64\tbb\vc14;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\tbb\bin\..\..\redist\intel64\tbb\vc14;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\redist\intel64_win\daal;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\redist\intel64_win\tbb\vc_mt;C:\Program Files (x86)\IntelSWTools\Advisor 2018\bin32;C:\Program Files (x86)\IntelSWTools\VTune Amplifier 2018\bin64;C:\Program Files (x86)\IntelSWTools\Inspector 2018\bin32;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\mpi\intel64\bin;C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.0.124\windows\mpi\intel64\bin;C:\Program Files (x86)\Common Files\Intel\Shared Libraries\redist\intel64_win\mpirt;C:\Program Files (x86)\Common Files\Intel\Shared Libraries\redist\ia32_win\mpirt;C:\Program Files (x86)\Common Files\Intel\Shared Libraries\redist\intel64_win\compiler;C:\Program Files (x86)\Common Files\Intel\Shared Libraries\redist\ia32_win\compiler;C:\Program Files\Microsoft MPI\Bin\;C:\Program Files (x86)\Intel\iCLS Client\;C:\Program Files\Intel\iCLS Client\;C:\Windows\system32;C:\Windows;C:\Windows\System32\Wbem;C:\Windows\System32\WindowsPowerShell\v1.0\;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files\Intel\Intel(R) Management Engine Components\DAL;C:\Program Files (x86)\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files\Intel\Intel(R) Management Engine Components\IPT;C:\Program Files\dotnet\;C:\Program Files\Microsoft SQL Server\130\Tools\Binn\;C:\Program Files\Git\cmd;C:\Program Files (x86)\GtkSharp\2.12\bin;C:\Program Files\Dell\Dell Data Protection\Drivers\TSS\bin\;C:\SIMULIA\Abaqus\Commands;C:\Users\xiang\AppData\Local\Microsoft\WindowsApps;;C:\IntelPython3;C:\IntelPython3\Scripts
INTEL_LIB_PATH = "C:\Program Files (x86)\IntelSWTools\compilers_and_libraries_2018.1.156\windows\compiler\lib\intel64_win"
DEBUG_EXECUTABLE_NAME = Debug.exe
DIR_SRC = .
DIR_INCLUDE = .\Include
DIR_DEBUG = .
CC = icl
CCFLAGS = /debug /c /EHsc /Qwd810 /I$(DIR_INCLUDE)
LINKFLAGS = /debug /libpath:$(INTEL_LIB_PATH) /OUT:$(DIR_DEBUG)\$(DEBUG_EXECUTABLE_NAME)

SRC_FILES = $(DIR_SRC)\Boundary.cpp \
			$(DIR_SRC)\C3D8.cpp \
			$(DIR_SRC)\FEM_Object_3D.cpp \
			$(DIR_SRC)\Load.cpp \
			$(DIR_SRC)\Local_Parameters.cpp \
			$(DIR_SRC)\Main.cpp \
			$(DIR_SRC)\Material.cpp \
			$(DIR_SRC)\Mesh_3D.cpp \
			$(DIR_SRC)\Model.cpp \
			$(DIR_SRC)\Section.cpp \
			$(DIR_SRC)\Step.cpp \
			$(DIR_SRC)\Surface.cpp \
			$(DIR_SRC)\Utilities.cpp

OBJSC = $(SRC_FILES:.cpp=.obj)

.cpp.obj:
	$(CC) $(CCFLAGS) $<

debug: $(OBJSC)
  echo %PATH%
  cd 
  link $(LINKFLAGS) $?
  copy $(DIR_DEBUG)\*.exe ..\x64\Debug
#copy $(DIR_DEBUG)\*.pdb ..\x64\Debug
  del ..\x64\Debug\Mechanics_Lab_Visual_Studio.exe
  ren ..\x64\Debug\$(DEBUG_EXECUTABLE_NAME) Mechanics_Lab_Visual_Studio.exe
#ren ..\x64\Debug\Debug.pdb Mechanics_Lab_Visual_Studio.pdb

clean:
	del *.obj